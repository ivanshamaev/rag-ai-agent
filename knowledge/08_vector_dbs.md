# Векторные базы данных (Vector DB)

Ключевой компонент для dense retrieval — хранилище векторов с поддержкой ANN (Approximate Nearest Neighbors).

## Принципы работы

- Хранение плотных векторов и эффективный поиск ближайших соседей с помощью индексов (HNSW, IVF, PQ и др.).
- ANN приближает full nearest-neighbor, существенно ускоряя поиск при больших объёмах.

## Популярные решения

- **FAISS**: библиотека от Facebook — эффективные индексы, локальная интеграция.
- **Milvus**: облачно-ориентированная система с возможностью масштабирования и распределённым хранением.
- **Qdrant**: векторная БД с REST/gRPC, поддержкой payload'ов и фильтрации.

## Особенности и выбор

- **Latency vs Recall**: настройка параметров индекса (nprobe, efSearch) балансирует эти показатели.
- **Масштабирование**: sharding, репликация, онлайн-обновление индекса.
- **Фильтры/метаданные**: payload-based фильтрация для гибридных запросов.

## Практические советы

- Храните метаданные отдельно и используйте payload для фильтрации векторов.
- Планируйте периодические реиндексации и мониторинг качества поиска.

## Пояснение для новичка: что это и как начать

- **Vector DB** — это система хранения, которая одновременно хранит векторы (эмбеддинги) и метаданные (например, текст фрагмента, ссылка на документ).
- **Payload** — небольшая структурированная информация (метаданные), которая хранится вместе с вектором и позволяет фильтровать результаты (например, только по дате или типу документа).
- **HNSW, IVF, PQ** — разные алгоритмы/структуры для индексации векторов: HNSW хорош для баланса скорости и качества; IVF разделяет векторы на кластеры; PQ компрессирует векторы для экономии памяти.

Простой стартовый план:
1. Выберите небольшую коллекцию документов (например, 1000 статей).
2. Вычислите эмбеддинги (например, с sentence-transformers).
3. Загрузите векторы в Qdrant или FAISS и попробуйте запросы, сравнивая результаты с полнотекстовым поиском.

Если вы видите, что результаты семантически похожи на запрос — базовый рабочий pipeline готов.
