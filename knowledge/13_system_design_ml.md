# Системный дизайн для ML-платформ

Общие принципы при проектировании масштабируемых и надёжных ML-систем.

## Основы системного дизайна

- **Масштабируемость**: горизонтальное шкалирование сервисов, sharding данных, очереди задач.
- **Высокая доступность**: репликация, health-checks, автоматические откаты.
- **Отказоустойчивость**: graceful degradation, circuit breakers, тематические резервные копии.

## Архитектура ML-платформы

- **Компоненты**: ингест, хранилище данных, расчёт эмбеддингов, векторная БД, сервисы retrieval, LLM-инференс, мониторинг.
- **Шаблоны**: microservices + shared-storage, serverless для пиковых рабочих нагрузок, managed services для векторных БД.

## Метрики качества и мониторинг

- **Fidelity / Groundedness**: метрики качества ответов по источникам.
- **Latency & Throughput**: SLO/SLI и alerting для LLM-инференса.
- **Model observability**: drift detection, distribution monitoring, per-feature metrics.

## Рекомендации по проектированию

- Декouple compute и storage: позволить независимое масштабирование.
- Планировать бюджет latency: кеширование, предварительное извлечение частей, асинхронные пайплайны.

## Пояснение для новичка: как думать о системе

- **Scalability (масштабируемость)**: думайте, как система будет работать при росте пользователей и данных — горизонтальное масштабирование (добавление машин) часто предпочтительнее вертикального (увеличение мощности одной машины).
- **Availability (доступность)**: реплики и автоматические проверки здоровья помогают не допустить простоя сервиса.
- **Fault tolerance (отказоустойчивость)**: проектируйте так, чтобы при падении части системы остальная продолжала работать с ограниченной функциональностью.

Пример: для RAG-сервиса можно сделать отдельные компоненты — ingestion (обновление индекса), retrieval (векторная БД + сервис поиска) и inference (LLM) — каждый компонент масштабируется независимо и имеет своё мониторинг и алерты.
